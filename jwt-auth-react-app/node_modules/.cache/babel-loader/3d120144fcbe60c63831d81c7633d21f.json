{"ast":null,"code":"import axios from \"axios\";\nimport api from \"./_api.js\";\nimport RoleModel from './../models/RoleModel';\n\nclass AuthService {\n  doBasicAuth(userName, password) {\n    console.log(userName + \" \" + password);\n    let authHeader = this.getAuthHeader(userName, password);\n    return api.post('auth/basic?userName=' + userName, {\n      username: username,\n      password: password\n    }, {\n      headers: {\n        authorization: authHeader //'Access-Control-Allow-Origin': 'http://localhost:3000',\n        //'Access-Control-Allow-Methods' : 'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n\n      }\n    });\n  }\n\n  getRoles(userName) {\n    return api.get(`roles/${userName}`);\n  }\n\n  registerLogin(userName, password, userId, roleName) {\n    console.log('registerLogin called...');\n    sessionStorage.setItem('userName', userName);\n    sessionStorage.setItem('userId', userId);\n    let authHeader = this.getAuthHeader(userName, password);\n    sessionStorage.setItem('authHeader', authHeader); //this.setupAxiosInterceptorForRequest (authHeader)\n  }\n\n  registerLogin(flag, user) {\n    console.log('registerLogin called...');\n    sessionStorage.setItem('userName', user.userName);\n    sessionStorage.setItem('userId', user.userId);\n    let authHeader = this.getAuthHeader(user.userName, user.password);\n    sessionStorage.setItem('authHeader', authHeader); //this.setupAxiosInterceptorForRequest (authHeader)\n\n    sessionStorage.setItem('isAuthenticated', flag);\n    sessionStorage.setItem('user', JSON.stringify(user));\n  }\n\n  setupAxiosInterceptorForRequest(authHeader) {\n    console.log('interceptors called');\n    axios.interceptors.request.use(config => {\n      if (this.isUserAuthenticated()) {\n        config.headers['authorization'] = authHeader;\n      }\n\n      return config;\n    });\n  }\n\n  UnregisterLogin(userName) {\n    sessionStorage.removeItem('userName');\n    sessionStorage.removeItem('userId');\n    sessionStorage.removeItem('authHeader');\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('isAuthenticated');\n  }\n\n  getLoggedInUserName() {\n    return sessionStorage.getItem('userName');\n  }\n\n  getLoggedInUserRoleName() {\n    return sessionStorage.getItem('roleName');\n  }\n\n  getLoggedInUserId() {\n    return sessionStorage.getItem('userId');\n  }\n\n  getAuthHeader(userName, password) {\n    return 'Basic ' + window.btoa(userName + \":\" + password);\n  }\n\n  isUserAuthenticated() {\n    let userName = sessionStorage.getItem('authHeader');\n    console.log(userName);\n\n    if (userName) {\n      return true;\n    }\n\n    return false;\n  }\n\n}\n\nexport default new AuthService();","map":{"version":3,"sources":["E:/k.vadivelmurugan/token-auth-sample/jwt-auth-react-app/src/services/AuthService.js"],"names":["axios","api","RoleModel","AuthService","doBasicAuth","userName","password","console","log","authHeader","getAuthHeader","post","username","headers","authorization","getRoles","get","registerLogin","userId","roleName","sessionStorage","setItem","flag","user","JSON","stringify","setupAxiosInterceptorForRequest","interceptors","request","use","config","isUserAuthenticated","UnregisterLogin","removeItem","getLoggedInUserName","getItem","getLoggedInUserRoleName","getLoggedInUserId","window","btoa"],"mappings":"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","sourcesContent":["import axios from \"axios\"\r\n\r\nimport api from \"./_api.js\"\r\nimport RoleModel from './../models/RoleModel'\r\nclass AuthService {\r\n\r\n    doBasicAuth (userName, password) {\r\n        console.log (userName + \" \" + password)\r\n\r\n        let authHeader = this.getAuthHeader (userName, password)\r\n\r\n        return api.post ('auth/basic?userName='+userName, \r\n            {username : username,\r\n            password : password }, \r\n            {\r\n                headers: {\r\n                    authorization: authHeader\r\n                    //'Access-Control-Allow-Origin': 'http://localhost:3000',\r\n                    //'Access-Control-Allow-Methods' : 'GET,PUT,POST,DELETE,PATCH,OPTIONS'\r\n                }\r\n            })\r\n    }\r\n\r\n    getRoles (userName) {\r\n        return api.get (`roles/${userName}`)\r\n    }\r\n\r\n    registerLogin (userName, password, userId, roleName) {\r\n        console.log ('registerLogin called...')\r\n        sessionStorage.setItem('userName', userName)\r\n        sessionStorage.setItem('userId', userId)\r\n\r\n        let authHeader = this.getAuthHeader(userName, password)\r\n        sessionStorage.setItem('authHeader', authHeader)\r\n        //this.setupAxiosInterceptorForRequest (authHeader)\r\n    }\r\n\r\n    registerLogin (flag, user) {\r\n        console.log ('registerLogin called...')\r\n        sessionStorage.setItem('userName', user.userName)\r\n        sessionStorage.setItem('userId', user.userId)\r\n\r\n        let authHeader = this.getAuthHeader(user.userName, user.password)\r\n        sessionStorage.setItem('authHeader', authHeader)\r\n        //this.setupAxiosInterceptorForRequest (authHeader)\r\n        sessionStorage.setItem ('isAuthenticated', flag)\r\n        sessionStorage.setItem ('user', JSON.stringify(user))\r\n    }\r\n\r\n    setupAxiosInterceptorForRequest (authHeader) {\r\n        console.log ('interceptors called') \r\n        axios.interceptors.request.use (\r\n            (config) => {\r\n                if (this.isUserAuthenticated ()) {                                       \r\n                    config.headers['authorization'] = authHeader                  \r\n                }\r\n                return config\r\n            }\r\n        )\r\n    }\r\n\r\n    UnregisterLogin (userName) {\r\n        sessionStorage.removeItem('userName')\r\n        sessionStorage.removeItem('userId')\r\n        sessionStorage.removeItem('authHeader')\r\n        sessionStorage.removeItem('user')\r\n        sessionStorage.removeItem ('isAuthenticated')\r\n    } \r\n\r\n    getLoggedInUserName() {\r\n        return sessionStorage.getItem ('userName');\r\n    }\r\n\r\n    getLoggedInUserRoleName() {\r\n        return sessionStorage.getItem ('roleName');\r\n    }\r\n\r\n    getLoggedInUserId() {\r\n        return sessionStorage.getItem ('userId');\r\n    }\r\n\r\n    getAuthHeader (userName, password) {\r\n        return 'Basic ' + window.btoa(userName + \":\" + password)\r\n    }\r\n\r\n    isUserAuthenticated () {\r\n        let userName = sessionStorage.getItem ('authHeader')\r\n        console.log (userName)\r\n        if (userName) {\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n}\r\n\r\nexport default new AuthService()"]},"metadata":{},"sourceType":"module"}