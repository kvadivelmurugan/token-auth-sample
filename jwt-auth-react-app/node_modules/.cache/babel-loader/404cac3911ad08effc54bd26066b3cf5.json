{"ast":null,"code":"import _defineProperty from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,useContext}from'react';import{UserContext}from'../../contexts/UserContext.js';import ErrorHandlerService from'../../services/ErrorHandlerService.js';import AuthService from'../../services/AuthService.js';var LoginComponent=/*#__PURE__*/function(_Component){_inherits(LoginComponent,_Component);var _super=_createSuper(LoginComponent);function LoginComponent(props){var _this;_classCallCheck(this,LoginComponent);_this=_super.call(this,props);_this.isValidForm=function(){var isValid=true;var errors=_this.state.errors;console.log(_this.state.email);if(_this.state.email.length<=0){isValid=false;errors.email='Please enter email';}if(_this.state.password.length<4){isValid=false;errors.password='Please enter password';}_this.setState({errors:errors});console.log(isValid);return isValid;};_this.handleClickOfLogin=_this.handleClickOfLogin.bind(_assertThisInitialized(_this));_this.handleOnChange=_this.handleOnChange.bind(_assertThisInitialized(_this));_this.state={email:'',password:'',errorMessage:'',errors:{email:'',password:''}};return _this;}_createClass(LoginComponent,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card col-4 offset-md-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header bg-light text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"text-danger\",children:this.state.errorMessage})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-left\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputEmail\",children:\"Email\"}),/*#__PURE__*/_jsx(\"span\",{class:\"text-danger font-weight-bold required\",children:\"*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",autoComplete:\"off\",className:\"form-control\",id:\"inputEmail\",placeholder:\"Email\",name:\"email\",value:this.state.email,onChange:this.handleOnChange}),/*#__PURE__*/_jsx(\"p\",{class:\"text-danger\",children:this.state.errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputPassword\",children:\"Password\"}),/*#__PURE__*/_jsx(\"span\",{class:\"text-danger font-weight-bold required\",children:\"*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"Password\",autoComplete:\"off\",className:\"form-control\",id:\"inputPassword\",placeholder:\"Password\",name:\"password\",value:this.state.password,onChange:this.handleOnChange}),/*#__PURE__*/_jsx(\"p\",{class:\"text-danger\",children:this.state.errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-center\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary text-nowrap\",onClick:this.handleClickOfLogin,children:\"Login\"}),\" \\xA0\",/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"btn btn-primary text-nowrap\",children:\"Reset\"})]})]})})]})]});}},{key:\"handleClickOfLogin\",value:function handleClickOfLogin(event){var _this2=this;event.preventDefault();if(this.isValidForm()){AuthService.doBasicAuth(this.state.email,this.state.password).then(function(response){console.log('auth success'+response.data.userId);console.log('ROLE '+response.data.roleList[0].roleName);//AuthService.registerLogin (this.state.email, this.state.password, response.data.userId, response.data.roleList[0].roleName)\nAuthService.registerLogin(true,response.data);_this2.context.registerLogin(true,response.data);_this2.props.history.push(\"/home\");}).catch(function(error){_this2.setState({errorMessage:ErrorHandlerService.handleError(error)});});}}},{key:\"handleOnChange\",value:function handleOnChange(event){this.setState(_defineProperty({},event.target.name,event.target.value));}}]);return LoginComponent;}(Component);LoginComponent.contextType=UserContext;export default LoginComponent;","map":{"version":3,"sources":["E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/src/components/login/LoginComponent.jsx"],"names":["React","Component","useContext","UserContext","ErrorHandlerService","AuthService","LoginComponent","props","isValidForm","isValid","errors","state","console","log","email","length","password","setState","handleClickOfLogin","bind","handleOnChange","errorMessage","event","preventDefault","doBasicAuth","then","response","data","userId","roleList","roleName","registerLogin","context","history","push","catch","error","handleError","target","name","value","contextType"],"mappings":"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","sourcesContent":["import React, { Component, useContext } from 'react'\r\nimport { UserContext } from '../../contexts/UserContext.js'\r\nimport ErrorHandlerService from '../../services/ErrorHandlerService.js'\r\nimport AuthService from '../../services/AuthService.js'\r\n\r\nclass LoginComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.handleClickOfLogin = this.handleClickOfLogin.bind(this)\r\n        this.handleOnChange = this.handleOnChange.bind(this)\r\n\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            errorMessage: '',\r\n            errors : {\r\n                email: '',\r\n                password: ''\r\n            }\r\n        }\r\n    }\r\n\r\n    static contextType = UserContext;\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div>\r\n                    <br></br>\r\n                    <br></br>\r\n                    <br></br>\r\n                    <br></br>\r\n                    <br></br>\r\n                    <br></br>\r\n                    <br></br>                    \r\n                </div>\r\n\r\n                <div className=\"card col-4 offset-md-8\">\r\n                    <div className=\"card-header bg-light text-center\">\r\n                        <h4>Login</h4>\r\n                        <h6 className=\"text-danger\">{this.state.errorMessage}</h6>\r\n                    </div>\r\n                    <div className=\"card-body text-left\">\r\n                        <form>\r\n                            \r\n                            <div className=\"form-group\">\r\n                                <label for=\"inputEmail\" >Email</label><span class=\"text-danger font-weight-bold required\">*</span>\r\n                                <input type=\"text\" autoComplete=\"off\" className=\"form-control\" id=\"inputEmail\" placeholder=\"Email\" name=\"email\" value={this.state.email} onChange={this.handleOnChange}/>\r\n                                <p class=\"text-danger\">{this.state.errors.email}</p>\r\n                            </div>\r\n                        \r\n                        \r\n                            <div className=\"form-group\">\r\n                                <label for=\"inputPassword\">Password</label><span class=\"text-danger font-weight-bold required\">*</span>\r\n                                <input type=\"Password\" autoComplete=\"off\" className=\"form-control\" id=\"inputPassword\" placeholder=\"Password\" name=\"password\" value={this.state.password} onChange={this.handleOnChange}/>\r\n                                <p class=\"text-danger\">{this.state.errors.password}</p>\r\n                            </div>\r\n                            \r\n                            \r\n                            <div className=\"form-group text-center\">                                    \r\n                                <button type=\"button\" className=\"btn btn-primary text-nowrap\" onClick={this.handleClickOfLogin}>Login</button> &nbsp;\r\n                                <button type=\"reset\" className=\"btn btn-primary text-nowrap\">Reset</button>\r\n                            </div>\r\n                            \r\n                        </form>                        \r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    handleClickOfLogin (event) {\r\n        event.preventDefault()\r\n        \r\n        if (this.isValidForm()) {\r\n            AuthService.doBasicAuth (this.state.email, this.state.password)\r\n                .then((response) => {\r\n                    console.log ('auth success' + response.data.userId)\r\n                    console.log ('ROLE ' + response.data.roleList[0].roleName)\r\n                    //AuthService.registerLogin (this.state.email, this.state.password, response.data.userId, response.data.roleList[0].roleName)\r\n                    AuthService.registerLogin (true, response.data)\r\n                    this.context.registerLogin (true, response.data)\r\n                    this.props.history.push (\"/home\")\r\n                }).catch(\r\n                (error) => {\r\n                    this.setState ({\r\n                        errorMessage : ErrorHandlerService.handleError (error) \r\n                    })\r\n                })\r\n        }\r\n    }\r\n\r\n    handleOnChange (event) {\r\n        this.setState ({\r\n            [event.target.name] : event.target.value\r\n        })\r\n    }\r\n\r\n    isValidForm = () => {\r\n        let isValid = true;\r\n        let errors = this.state.errors\r\n\r\n        console.log (this.state.email)\r\n        if (this.state.email.length <= 0) {\r\n            isValid = false\r\n            errors.email = 'Please enter email'\r\n        }\r\n        \r\n        if (this.state.password.length < 4) {\r\n            isValid = false\r\n            errors.password = 'Please enter password'\r\n        }\r\n\r\n        this.setState ({\r\n            errors: errors\r\n        })\r\n        console.log (isValid)\r\n        return isValid;\r\n    }\r\n}\r\n\r\nexport default LoginComponent"]},"metadata":{},"sourceType":"module"}