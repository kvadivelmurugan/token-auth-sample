{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\r\n * This is the HeaderComponent\r\n * \r\n * \r\n * Developed by vini technology solutions\r\n */import React,{Component,useContext}from'react';import{withRouter}from'react-router';import AuthService from'../../services/AuthService';import{UserContext}from'../../contexts/UserContext';import'./HeaderComponent.css';var HeaderComponent=/*#__PURE__*/function(_Component){_inherits(HeaderComponent,_Component);var _super=_createSuper(HeaderComponent);function HeaderComponent(){var _this;_classCallCheck(this,HeaderComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onClickLogout=_this.onClickLogout.bind(_assertThisInitialized(_this));_this.hasRole=function(roleName){var roles=_this.context.roles;console.log(roles);console.log('roleName : '+roleName);var isValid=false;roles.map(function(role){console.log(role.roleName);if(role.roleName===roleName){console.log('present');isValid=true;}});return isValid;};_this.initialize=function(){_this.setState({isUserAuthenticated:_this.context.isAuthenticated,loggedInUserId:_this.context.loggedInUserId,loggedInUserName:_this.context.loggedInUserName,roles:_this.context.roles});console.log('...initialized...');};return _this;}_createClass(HeaderComponent,[{key:\"componentDidMount\",value:function componentDidMount(){console.log('componentDidMount...');this.initialize();}},{key:\"render\",value:function render(){console.log('...render...');var isUserAuthenticated=this.context.isAuthenticated;var loggedInUserName=this.context.loggedInUserName;console.log(' isUserAuthenticated :: '+isUserAuthenticated);console.log(' loggedInUserName :: '+this.context.loggedInUserName);return/*#__PURE__*/_jsxs(\"nav\",{id:\"navMain\",className:\"navbar navbar-expand-lg navbar-dark bg-faded\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"navbar-brand\",href:\"/home\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/logo.jpg\",height:\"20\",width:\"20\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarNavDropdown\",\"aria-controls\":\"navbarNavDropdown\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\",children:/*#__PURE__*/_jsx(\"span\",{className:\"navbar-toggler-icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarNavDropdown\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav\",children:[isUserAuthenticated&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item active\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"nav-link\",href:\"/home\",children:[\"Home\",/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"(current)\"})]})}),isUserAuthenticated&&this.hasRole('ROLE_CONTACTS')&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link\",href:\"/contacts\",children:\"Contacts\"})}),isUserAuthenticated&&this.hasRole('ROLE_EXPENSES')&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link\",href:\"/expenses\",children:\"Expenses\"})}),isUserAuthenticated&&this.hasRole('ROLE_EVENTS')&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link\",href:\"/events\",children:\"Events\"})}),isUserAuthenticated&&this.hasRole('ROLE_NOTES')&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link\",href:\"/notes\",children:\"Notes\"})})]}),isUserAuthenticated&&/*#__PURE__*/_jsx(\"ul\",{className:\"nav ml-auto\",children:/*#__PURE__*/_jsxs(\"li\",{className:\"nav-item dropdown\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"nav-link dropdown-toggle navbar-text\",href:\"#\",id:\"navbarDropdownMenuLink\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:loggedInUserName}),/*#__PURE__*/_jsxs(\"div\",{id:\"navDropDown\",className:\"dropdown-menu\",\"aria-labelledby\":\"navbarDropdownMenuLink\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",href:\"#\",children:\"Account\"}),/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",href:\"#\",children:\"Preferences\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-divider\"}),/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",href:\"#\",onClick:this.onClickLogout,children:\"Logout\"})]})]})})]})]});}},{key:\"onClickLogout\",value:function onClickLogout(){AuthService.UnregisterLogin();this.context.registerLogin(false,{});this.state={roleList:[]};this.props.history.push('/login');}}]);return HeaderComponent;}(Component);HeaderComponent.contextType=UserContext;export default withRouter(HeaderComponent);","map":{"version":3,"sources":["E:/k.vadivelmurugan/basic-auth-sample/basic-auth-react-app/src/components/header/HeaderComponent.jsx"],"names":["React","Component","useContext","withRouter","AuthService","UserContext","HeaderComponent","onClickLogout","bind","hasRole","roleName","roles","context","console","log","isValid","map","role","initialize","setState","isUserAuthenticated","isAuthenticated","loggedInUserId","loggedInUserName","UnregisterLogin","registerLogin","state","roleList","props","history","push","contextType"],"mappings":"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","sourcesContent":["/**\r\n * This is the HeaderComponent\r\n * \r\n * \r\n * Developed by vini technology solutions\r\n */\r\nimport React, { Component, useContext } from 'react'\r\nimport {withRouter} from 'react-router'\r\n\r\nimport AuthService from '../../services/AuthService'\r\n\r\nimport { UserContext } from '../../contexts/UserContext'\r\n\r\nimport './HeaderComponent.css'\r\n\r\nclass HeaderComponent extends Component {\r\n    static contextType = UserContext;\r\n\r\n    componentDidMount () {\r\n        console.log ('componentDidMount...')\r\n        this.initialize()\r\n    }\r\n\r\n    onClickLogout = this.onClickLogout.bind(this)\r\n\r\n    render () {\r\n        console.log ('...render...')\r\n        const isUserAuthenticated = this.context.isAuthenticated\r\n        const loggedInUserName = this.context.loggedInUserName\r\n        console.log (' isUserAuthenticated :: ' + isUserAuthenticated)\r\n        console.log (' loggedInUserName :: ' + this.context.loggedInUserName)\r\n        \r\n        return (\r\n            \r\n            <nav id=\"navMain\" className=\"navbar navbar-expand-lg navbar-dark bg-faded\">\r\n                <a className=\"navbar-brand\" href=\"/home\"><img src=\"/images/logo.jpg\" height=\"20\" width=\"20\"/></a>\r\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavDropdown\" aria-controls=\"navbarNavDropdown\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                    <span className=\"navbar-toggler-icon\"></span>\r\n                </button>\r\n\r\n                <div className=\"collapse navbar-collapse\" id=\"navbarNavDropdown\">\r\n                    <ul className=\"navbar-nav\">\r\n                        {isUserAuthenticated && <li className=\"nav-item active\">\r\n                            <a className=\"nav-link\" href=\"/home\">Home<span className=\"sr-only\">(current)</span></a>\r\n                        </li>}\r\n                        {isUserAuthenticated && this.hasRole ('ROLE_CONTACTS') &&  <li className=\"nav-item\">\r\n                            <a className=\"nav-link\" href=\"/contacts\">Contacts</a>\r\n                        </li>}\r\n                        {isUserAuthenticated && this.hasRole ('ROLE_EXPENSES') &&  <li className=\"nav-item\">\r\n                            <a className=\"nav-link\" href=\"/expenses\">Expenses</a>\r\n                        </li>}\r\n                        {isUserAuthenticated && this.hasRole ('ROLE_EVENTS') && <li className=\"nav-item\">\r\n                            <a className=\"nav-link\" href=\"/events\">Events</a>\r\n                        </li>}                        \r\n                        {isUserAuthenticated && this.hasRole ('ROLE_NOTES') &&  <li className=\"nav-item\">\r\n                            <a className=\"nav-link\" href=\"/notes\">Notes</a>\r\n                        </li>}                                              \r\n                    </ul>\r\n                    \r\n                    {isUserAuthenticated && \r\n                    <ul className=\"nav ml-auto\">\r\n                        <li className=\"nav-item dropdown\"> \r\n                            <a className=\"nav-link dropdown-toggle navbar-text\" href=\"#\" id=\"navbarDropdownMenuLink\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                {loggedInUserName}\r\n                            </a>\r\n                            <div id=\"navDropDown\" className=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\r\n                            <a className=\"dropdown-item\" href=\"#\">Account</a>\r\n                            <a className=\"dropdown-item\" href=\"#\">Preferences</a>\r\n                            <div className=\"dropdown-divider\"></div>\r\n                            <a className=\"dropdown-item\" href=\"#\" onClick = {this.onClickLogout}>Logout</a>\r\n                            </div>\r\n                        </li> \r\n                    </ul>}\r\n                </div>\r\n            </nav>\r\n        )\r\n    }\r\n\r\n    onClickLogout () {\r\n        AuthService.UnregisterLogin();\r\n        this.context.registerLogin (false, {})\r\n        this.state = {\r\n            roleList :[]\r\n        }\r\n        this.props.history.push ('/login')\r\n    }\r\n\r\n    hasRole = (roleName) => {\r\n        let roles = this.context.roles\r\n        console.log (roles)\r\n        console.log ('roleName : ' + roleName)\r\n        let isValid = false\r\n        roles.map (\r\n            (role) => {\r\n                console.log (role.roleName)\r\n                if (role.roleName === roleName) {\r\n                    console.log ('present')\r\n                    isValid = true\r\n                }\r\n            }\r\n        )\r\n        return isValid\r\n    }\r\n\r\n    initialize = () => {\r\n        this.setState ({\r\n            isUserAuthenticated: this.context.isAuthenticated,\r\n            loggedInUserId: this.context.loggedInUserId,\r\n            loggedInUserName: this.context.loggedInUserName,\r\n            roles: this.context.roles\r\n        })\r\n        console.log ('...initialized...')\r\n    }\r\n}\r\n\r\nexport default withRouter(HeaderComponent)"]},"metadata":{},"sourceType":"module"}